module.exports = {

"[project]/.next-internal/server/app/api/upload/route/actions.js [app-rsc] (server actions loader, ecmascript)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
}}),
"[externals]/next/dist/compiled/next-server/app-route-turbo.runtime.dev.js [external] (next/dist/compiled/next-server/app-route-turbo.runtime.dev.js, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("next/dist/compiled/next-server/app-route-turbo.runtime.dev.js", () => require("next/dist/compiled/next-server/app-route-turbo.runtime.dev.js"));

module.exports = mod;
}}),
"[externals]/next/dist/compiled/@opentelemetry/api [external] (next/dist/compiled/@opentelemetry/api, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("next/dist/compiled/@opentelemetry/api", () => require("next/dist/compiled/@opentelemetry/api"));

module.exports = mod;
}}),
"[externals]/next/dist/compiled/next-server/app-page-turbo.runtime.dev.js [external] (next/dist/compiled/next-server/app-page-turbo.runtime.dev.js, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("next/dist/compiled/next-server/app-page-turbo.runtime.dev.js", () => require("next/dist/compiled/next-server/app-page-turbo.runtime.dev.js"));

module.exports = mod;
}}),
"[externals]/next/dist/server/app-render/work-unit-async-storage.external.js [external] (next/dist/server/app-render/work-unit-async-storage.external.js, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("next/dist/server/app-render/work-unit-async-storage.external.js", () => require("next/dist/server/app-render/work-unit-async-storage.external.js"));

module.exports = mod;
}}),
"[externals]/next/dist/server/app-render/work-async-storage.external.js [external] (next/dist/server/app-render/work-async-storage.external.js, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("next/dist/server/app-render/work-async-storage.external.js", () => require("next/dist/server/app-render/work-async-storage.external.js"));

module.exports = mod;
}}),
"[externals]/next/dist/server/app-render/after-task-async-storage.external.js [external] (next/dist/server/app-render/after-task-async-storage.external.js, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("next/dist/server/app-render/after-task-async-storage.external.js", () => require("next/dist/server/app-render/after-task-async-storage.external.js"));

module.exports = mod;
}}),
"[externals]/crypto [external] (crypto, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("crypto", () => require("crypto"));

module.exports = mod;
}}),
"[externals]/querystring [external] (querystring, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("querystring", () => require("querystring"));

module.exports = mod;
}}),
"[externals]/url [external] (url, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("url", () => require("url"));

module.exports = mod;
}}),
"[externals]/fs [external] (fs, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("fs", () => require("fs"));

module.exports = mod;
}}),
"[externals]/path [external] (path, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("path", () => require("path"));

module.exports = mod;
}}),
"[externals]/https [external] (https, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("https", () => require("https"));

module.exports = mod;
}}),
"[externals]/http [external] (http, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("http", () => require("http"));

module.exports = mod;
}}),
"[externals]/stream [external] (stream, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("stream", () => require("stream"));

module.exports = mod;
}}),
"[project]/src/lib/cloudinary.ts [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "default": (()=>__TURBOPACK__default__export__),
    "deleteFromCloudinary": (()=>deleteFromCloudinary),
    "extractPublicIdFromUrl": (()=>extractPublicIdFromUrl),
    "getImageSrcSet": (()=>getImageSrcSet),
    "getOptimizedImageUrl": (()=>getOptimizedImageUrl),
    "getOptimizedVideoUrl": (()=>getOptimizedVideoUrl),
    "getResponsiveImageUrl": (()=>getResponsiveImageUrl),
    "getVideoThumbnail": (()=>getVideoThumbnail),
    "isCloudinaryUrl": (()=>isCloudinaryUrl),
    "uploadToCloudinary": (()=>uploadToCloudinary)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$cloudinary$2f$cloudinary$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/cloudinary/cloudinary.js [app-route] (ecmascript)");
;
// ØªÙƒÙˆÙŠÙ† Cloudinary
const isCloudinaryConfigured = Boolean(process.env.CLOUDINARY_CLOUD_NAME && process.env.CLOUDINARY_API_KEY && process.env.CLOUDINARY_API_SECRET && process.env.CLOUDINARY_CLOUD_NAME !== 'demo');
if (isCloudinaryConfigured) {
    __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$cloudinary$2f$cloudinary$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["v2"].config({
        cloud_name: process.env.CLOUDINARY_CLOUD_NAME,
        api_key: process.env.CLOUDINARY_API_KEY,
        api_secret: process.env.CLOUDINARY_API_SECRET
    });
    console.log('âœ… Cloudinary configured successfully with cloud:', process.env.CLOUDINARY_CLOUD_NAME);
} else {
    console.log('âš ï¸ Cloudinary not configured. Using local fallback mode.');
    console.log('ğŸ“‹ Environment variables status:', {
        cloud_name: process.env.CLOUDINARY_CLOUD_NAME || 'missing',
        api_key: process.env.CLOUDINARY_API_KEY ? 'configured' : 'missing',
        api_secret: process.env.CLOUDINARY_API_SECRET ? 'configured' : 'missing'
    });
}
async function uploadToCloudinary(file, options = {}) {
    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø¥Ø¹Ø¯Ø§Ø¯ Cloudinary
    if (!isCloudinaryConfigured) {
        throw new Error('Cloudinary ØºÙŠØ± Ù…ÙØ¹ÙØ¯Ù‘. ÙŠØ±Ø¬Ù‰ Ø¥Ø¶Ø§ÙØ© Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø§Ø¹ØªÙ…Ø§Ø¯ ÙÙŠ Ù…Ù„Ù .env');
    }
    try {
        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø§Ù„Ù…Ù„Ù Ø£ÙˆÙ„Ø§Ù‹
        if (!file || file.size === 0) {
            throw new Error('Ø§Ù„Ù…Ù„Ù ÙØ§Ø±Øº Ø£Ùˆ ØºÙŠØ± ØµØ§Ù„Ø­');
        }
        // ØªØ­ÙˆÙŠÙ„ File Ø¥Ù„Ù‰ Buffer Ù…Ø¹ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø£Ø®Ø·Ø§Ø¡
        let buffer;
        try {
            const bytes = await file.arrayBuffer();
            buffer = Buffer.from(bytes);
            if (buffer.length === 0) {
                throw new Error('ÙØ´Ù„ ÙÙŠ Ù‚Ø±Ø§Ø¡Ø© Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù…Ù„Ù');
            }
        } catch (error) {
            throw new Error(`ÙØ´Ù„ ÙÙŠ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ù…Ù„Ù: ${error instanceof Error ? error.message : 'Ø®Ø·Ø£ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ'}`);
        }
        // ØªØ­Ø¯ÙŠØ¯ Ù†ÙˆØ¹ Ø§Ù„Ù…Ù„Ù Ù…Ø¹ ÙØ­Øµ Ø£Ø¹Ù…Ù‚
        const isVideo1 = file.type.startsWith('video/');
        const isImage = file.type.startsWith('image/');
        if (!isVideo1 && !isImage) {
            throw new Error(`Ù†ÙˆØ¹ Ø§Ù„Ù…Ù„Ù ØºÙŠØ± Ù…Ø¯Ø¹ÙˆÙ…: ${file.type}`);
        }
        const defaultOptions = {
            folder: options.folder || 'portfolio',
            resource_type: options.resource_type || (isVideo1 ? 'video' : isImage ? 'image' : 'auto'),
            public_id: options.public_id,
            // ØªØ­Ø³ÙŠÙ†Ø§Øª Ù…Ø®ØµØµØ© Ø­Ø³Ø¨ Ù†ÙˆØ¹ Ø§Ù„Ù…Ù„Ù
            transformation: options.transformation || (isVideo1 ? {
                // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø£Ø³Ø§Ø³ÙŠØ© Ù„Ù„ÙÙŠØ¯ÙŠÙˆ
                quality: 'auto',
                width: 1280,
                height: 720,
                crop: 'limit',
                bit_rate: '1m'
            } : {
                // ØªØ­Ø³ÙŠÙ†Ø§Øª Ù„Ù„ØµÙˆØ±
                quality: 'auto',
                fetch_format: 'auto',
                flags: 'progressive'
            }),
            // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©
            overwrite: true,
            invalidate: true,
            // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø®Ø§ØµØ© Ø¨Ø§Ù„ÙÙŠØ¯ÙŠÙˆ
            ...isVideo1 && {
                chunk_size: 6000000,
                timeout: 120000
            },
            ...options
        };
        console.log('ğŸš€ Ø±ÙØ¹ Ù…Ù„Ù Ø¥Ù„Ù‰ Cloudinary:', {
            name: file.name,
            type: file.type,
            size: file.size,
            folder: defaultOptions.folder,
            resource_type: defaultOptions.resource_type,
            sizeInMB: (file.size / 1024 / 1024).toFixed(2) + 'MB'
        });
        // Ø±ÙØ¹ Ø§Ù„Ù…Ù„Ù
        const result = await new Promise((resolve, reject)=>{
            __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$cloudinary$2f$cloudinary$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["v2"].uploader.upload_stream(defaultOptions, (error, result)=>{
                if (error) {
                    console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø±ÙØ¹ Cloudinary:', error);
                    reject(error);
                } else if (result) {
                    console.log('âœ… ØªÙ… Ø±ÙØ¹ Ø§Ù„Ù…Ù„Ù Ø¨Ù†Ø¬Ø§Ø­:', {
                        url: result.secure_url,
                        public_id: result.public_id,
                        resource_type: result.resource_type,
                        bytes: result.bytes
                    });
                    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø§Ù„Ù†ØªÙŠØ¬Ø©
                    if (!result.secure_url) {
                        reject(new Error('Ù„Ù… ÙŠØªÙ… Ø¥Ø±Ø¬Ø§Ø¹ Ø±Ø§Ø¨Ø· Ø¢Ù…Ù† Ù…Ù† Cloudinary'));
                        return;
                    }
                    resolve(result);
                } else {
                    reject(new Error('Ù„Ù… ÙŠØªÙ… Ø¥Ø±Ø¬Ø§Ø¹ Ù†ØªÙŠØ¬Ø© Ù…Ù† Cloudinary'));
                }
            }).end(buffer);
        });
        return result;
    } catch (error) {
        console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø±ÙØ¹ Ø§Ù„Ù…Ù„Ù:', error);
        // Ø±Ø³Ø§Ø¦Ù„ Ø®Ø·Ø£ Ù…Ø®ØµØµØ© Ø­Ø³Ø¨ Ù†ÙˆØ¹ Ø§Ù„Ø®Ø·Ø£
        let errorMessage = 'Ø®Ø·Ø£ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ';
        if (error instanceof Error) {
            if (error.message.includes('Invalid cloud_name')) {
                errorMessage = 'Ø§Ø³Ù… Cloud ØºÙŠØ± ØµØ­ÙŠØ­ ÙÙŠ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Cloudinary';
            } else if (error.message.includes('Invalid API key')) {
                errorMessage = 'API Key ØºÙŠØ± ØµØ­ÙŠØ­ ÙÙŠ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Cloudinary';
            } else if (error.message.includes('file size')) {
                errorMessage = 'Ø­Ø¬Ù… Ø§Ù„Ù…Ù„Ù ÙƒØ¨ÙŠØ± Ø¬Ø¯Ø§Ù‹. Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ Ù„Ù„ÙÙŠØ¯ÙŠÙˆ 100MB';
            } else if (error.message.includes('timeout')) {
                errorMessage = 'Ø§Ù†ØªÙ‡Øª Ù…Ù‡Ù„Ø© Ø±ÙØ¹ Ø§Ù„Ù…Ù„Ù. Ø¬Ø±Ø¨ Ù…Ù„Ù Ø£ØµØºØ±';
            } else if (isVideo && error.message.includes('resource_type')) {
                errorMessage = 'Ù†ÙˆØ¹ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ ØºÙŠØ± Ù…Ø¯Ø¹ÙˆÙ…. Ø¬Ø±Ø¨ MP4';
            } else {
                errorMessage = error.message;
            }
        }
        throw new Error(`ÙØ´Ù„ ÙÙŠ Ø±ÙØ¹ Ø§Ù„Ù…Ù„Ù: ${errorMessage}`);
    }
}
async function deleteFromCloudinary(publicId, resourceType = 'image') {
    try {
        console.log('ğŸ—‘ï¸ Ø­Ø°Ù Ù…Ù„Ù Ù…Ù† Cloudinary:', publicId);
        const result = await __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$cloudinary$2f$cloudinary$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["v2"].uploader.destroy(publicId, {
            resource_type: resourceType,
            invalidate: true
        });
        console.log('âœ… ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ù„Ù:', result);
        return result;
    } catch (error) {
        console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø­Ø°Ù Ø§Ù„Ù…Ù„Ù:', error);
        throw error;
    }
}
function getOptimizedImageUrl(publicId, options = {}) {
    return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$cloudinary$2f$cloudinary$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["v2"].url(publicId, {
        quality: options.quality || 'auto',
        fetch_format: options.format || 'auto',
        width: options.width,
        height: options.height,
        crop: options.crop || 'fill',
        flags: 'progressive',
        ...options
    });
}
function getOptimizedVideoUrl(publicId, options = {}) {
    return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$cloudinary$2f$cloudinary$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["v2"].url(publicId, {
        resource_type: 'video',
        quality: options.quality || 'auto',
        fetch_format: options.format || 'auto',
        width: options.width,
        height: options.height,
        ...options
    });
}
function getVideoThumbnail(publicId, options = {}) {
    return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$cloudinary$2f$cloudinary$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["v2"].url(publicId, {
        resource_type: 'video',
        format: 'jpg',
        quality: 'auto',
        width: options.width || 300,
        height: options.height || 200,
        crop: 'fill',
        start_offset: options.start_offset || '0',
        ...options
    });
}
function getResponsiveImageUrl(publicId, usage = 'card') {
    const configs = {
        thumbnail: {
            width: 150,
            height: 150,
            crop: 'thumb',
            gravity: 'face'
        },
        card: {
            width: 400,
            height: 300,
            crop: 'fill'
        },
        hero: {
            width: 1200,
            height: 600,
            crop: 'fill'
        },
        gallery: {
            width: 800,
            height: 600,
            crop: 'fill'
        }
    };
    const config = configs[usage];
    return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$cloudinary$2f$cloudinary$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["v2"].url(publicId, {
        ...config,
        quality: 'auto',
        fetch_format: 'auto',
        flags: 'progressive',
        dpr: 'auto'
    });
}
function getImageSrcSet(publicId) {
    const sizes = [
        320,
        640,
        768,
        1024,
        1280,
        1920
    ];
    return sizes.map((size)=>{
        const url = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$cloudinary$2f$cloudinary$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["v2"].url(publicId, {
            width: size,
            quality: 'auto',
            fetch_format: 'auto',
            flags: 'progressive'
        });
        return `${url} ${size}w`;
    }).join(', ');
}
function isCloudinaryUrl(url) {
    return url.includes('cloudinary.com') || url.includes('res.cloudinary.com');
}
function extractPublicIdFromUrl(url) {
    if (!isCloudinaryUrl(url)) return null;
    const matches = url.match(/\/(?:image|video)\/upload\/(?:v\d+\/)?(.+?)(?:\.|$)/);
    return matches ? matches[1].split('.')[0] : null;
}
const __TURBOPACK__default__export__ = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$cloudinary$2f$cloudinary$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["v2"];
}}),
"[externals]/fs/promises [external] (fs/promises, cjs)": (function(__turbopack_context__) {

var { g: global, __dirname, m: module, e: exports } = __turbopack_context__;
{
const mod = __turbopack_context__.x("fs/promises", () => require("fs/promises"));

module.exports = mod;
}}),
"[project]/src/app/api/upload/route.ts [app-route] (ecmascript)": ((__turbopack_context__) => {
"use strict";

var { g: global, __dirname } = __turbopack_context__;
{
__turbopack_context__.s({
    "POST": (()=>POST)
});
var __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/node_modules/next/server.js [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$cloudinary$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/src/lib/cloudinary.ts [app-route] (ecmascript)");
var __TURBOPACK__imported__module__$5b$externals$5d2f$fs$2f$promises__$5b$external$5d$__$28$fs$2f$promises$2c$__cjs$29$__ = __turbopack_context__.i("[externals]/fs/promises [external] (fs/promises, cjs)");
var __TURBOPACK__imported__module__$5b$externals$5d2f$fs__$5b$external$5d$__$28$fs$2c$__cjs$29$__ = __turbopack_context__.i("[externals]/fs [external] (fs, cjs)");
var __TURBOPACK__imported__module__$5b$externals$5d2f$path__$5b$external$5d$__$28$path$2c$__cjs$29$__ = __turbopack_context__.i("[externals]/path [external] (path, cjs)");
;
;
;
;
;
// Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØªÙˆÙØ± Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Cloudinary
const isCloudinaryAvailable = Boolean(process.env.CLOUDINARY_CLOUD_NAME && process.env.CLOUDINARY_API_KEY && process.env.CLOUDINARY_API_SECRET && process.env.CLOUDINARY_CLOUD_NAME !== 'demo');
// Ø¯Ø§Ù„Ø© Ù„ØªØ­Ø³ÙŠÙ† Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ù…Ù„ÙØ§Øª Ù„Ù€ SEO
function generateSEOFriendlyName(originalName) {
    const nameWithoutExt = originalName.replace(/\.[^/.]+$/, '');
    return nameWithoutExt.toLowerCase().replace(/[\s_]+/g, '-') // Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ø§Ù„Ù…Ø³Ø§ÙØ§Øª Ø¨Ù€ -
    .replace(/[^\w\u0600-\u06FF-]/g, '') // Ø§Ù„Ø­ÙØ§Ø¸ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø­Ø±Ù Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© ÙˆØ§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ© ÙÙ‚Ø·
    .replace(/-+/g, '-') // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ø´Ø±Ø·Ø§Øª Ø§Ù„Ù…ØªÙƒØ±Ø±Ø©
    .replace(/^-|-$/g, '') // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ø´Ø±Ø·Ø§Øª Ù…Ù† Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© ÙˆØ§Ù„Ù†Ù‡Ø§ÙŠØ©
    .substring(0, 50) || 'aldeyar-project'; // ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø·ÙˆÙ„
}
// Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ù…Ø­Ø³Ù†Ø© Ù„Ù„Ø±ÙØ¹
const UPLOAD_CONFIG = {
    maxFileSize: isCloudinaryAvailable ? 100 * 1024 * 1024 : 50 * 1024 * 1024,
    maxFiles: 20,
    allowedImageTypes: [
        'image/jpeg',
        'image/jpg',
        'image/png',
        'image/webp',
        'image/gif',
        'image/bmp',
        'image/tiff'
    ],
    allowedVideoTypes: [
        'video/mp4',
        'video/mov',
        'video/avi',
        'video/webm',
        'video/quicktime',
        'video/x-msvideo',
        'video/mkv'
    ],
    compressionQuality: {
        image: {
            quality: 85,
            width: 1920,
            height: 1080
        },
        video: {
            quality: 'auto',
            width: 1280,
            height: 720
        }
    }
};
async function POST(request) {
    try {
        const formData = await request.formData();
        // Ø¯Ø¹Ù… Ø±ÙØ¹ Ù…Ù„Ù ÙˆØ§Ø­Ø¯ Ø£Ùˆ Ø¹Ø¯Ø© Ù…Ù„ÙØ§Øª
        const files = formData.getAll('files');
        const singleFile = formData.get('file');
        console.log('ğŸ“¤ Ù…Ø­Ø§ÙˆÙ„Ø© Ø±ÙØ¹ Ù…Ù„Ù:', {
            singleFile: !!singleFile,
            singleFileName: singleFile?.name,
            singleFileType: singleFile?.type,
            singleFileSize: singleFile?.size,
            multipleFiles: files.length,
            cloudinaryAvailable: isCloudinaryAvailable
        });
        let filesToProcess = [];
        if (singleFile && singleFile.size > 0) {
            filesToProcess = [
                singleFile
            ];
        } else if (files && files.length > 0) {
            // ØªØµÙÙŠØ© Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„ÙØ§Ø±ØºØ©
            filesToProcess = files.filter((file)=>file && file.size > 0);
        }
        if (filesToProcess.length === 0) {
            console.log('âŒ Ù„Ù… ÙŠØªÙ… ØªØ­Ø¯ÙŠØ¯ Ø£ÙŠ Ù…Ù„ÙØ§Øª');
            return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
                error: 'Ù„Ù… ÙŠØªÙ… ØªØ­Ø¯ÙŠØ¯ Ø£ÙŠ Ù…Ù„ÙØ§Øª'
            }, {
                status: 400
            });
        }
        const uploadedFiles = [];
        // Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø­Ù„ÙŠ ÙƒÙ€ fallback
        let uploadDir = '';
        if (!isCloudinaryAvailable) {
            uploadDir = __TURBOPACK__imported__module__$5b$externals$5d2f$path__$5b$external$5d$__$28$path$2c$__cjs$29$__["default"].join(process.cwd(), 'public', 'uploads');
            if (!(0, __TURBOPACK__imported__module__$5b$externals$5d2f$fs__$5b$external$5d$__$28$fs$2c$__cjs$29$__["existsSync"])(uploadDir)) {
                await (0, __TURBOPACK__imported__module__$5b$externals$5d2f$fs$2f$promises__$5b$external$5d$__$28$fs$2f$promises$2c$__cjs$29$__["mkdir"])(uploadDir, {
                    recursive: true
                });
                console.log('ğŸ“ ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø¬Ù„Ø¯ uploads (fallback mode)');
            }
        }
        for (const file of filesToProcess){
            if (!file || file.size === 0) {
                console.log('âš ï¸ ØªØ¬Ø§Ù‡Ù„ Ù…Ù„Ù ÙØ§Ø±Øº');
                continue;
            }
            console.log('ğŸ” Ù…Ø¹Ø§Ù„Ø¬Ø© Ù…Ù„Ù:', {
                name: file.name,
                type: file.type,
                size: file.size
            });
            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ù†ÙˆØ¹ Ø§Ù„Ù…Ù„Ù Ù…Ø¹ Ø¯Ø¹Ù… Ø£ÙØ¶Ù„
            const isImage = UPLOAD_CONFIG.allowedImageTypes.includes(file.type);
            const isVideo = UPLOAD_CONFIG.allowedVideoTypes.includes(file.type);
            if (!isImage && !isVideo) {
                console.log('âŒ Ù†ÙˆØ¹ Ù…Ù„Ù ØºÙŠØ± Ù…Ø¯Ø¹ÙˆÙ…:', file.type);
                uploadedFiles.push({
                    originalName: file.name,
                    error: `Ù†ÙˆØ¹ Ø§Ù„Ù…Ù„Ù ${file.type} ØºÙŠØ± Ù…Ø¯Ø¹ÙˆÙ…`,
                    type: 'ERROR'
                });
                continue;
            }
            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø­Ø¬Ù… Ø§Ù„Ù…Ù„Ù Ù…Ø¹ Ø±Ø³Ø§Ø¦Ù„ Ù…ÙØµÙ„Ø©
            if (file.size > UPLOAD_CONFIG.maxFileSize) {
                const maxSizeMB = (UPLOAD_CONFIG.maxFileSize / 1024 / 1024).toFixed(0);
                const fileSizeMB = (file.size / 1024 / 1024).toFixed(1);
                console.log(`âŒ Ù…Ù„Ù ÙƒØ¨ÙŠØ± Ø¬Ø¯Ø§Ù‹: ${fileSizeMB}MB > ${maxSizeMB}MB`);
                uploadedFiles.push({
                    originalName: file.name,
                    error: `Ø­Ø¬Ù… Ø§Ù„Ù…Ù„Ù ${fileSizeMB}MB ÙŠØªØ¬Ø§ÙˆØ² Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ ${maxSizeMB}MB`,
                    type: 'ERROR'
                });
                continue;
            }
            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù…ØªØ¯Ø§Ø¯ Ø§Ù„Ù…Ù„Ù Ù„Ù„Ø£Ù…Ø§Ù†
            const fileExtension = __TURBOPACK__imported__module__$5b$externals$5d2f$path__$5b$external$5d$__$28$path$2c$__cjs$29$__["default"].extname(file.name).toLowerCase();
            const validImageExts = [
                '.jpg',
                '.jpeg',
                '.png',
                '.webp',
                '.gif',
                '.bmp',
                '.tiff'
            ];
            const validVideoExts = [
                '.mp4',
                '.mov',
                '.avi',
                '.webm',
                '.mkv'
            ];
            if (isImage && !validImageExts.includes(fileExtension)) {
                uploadedFiles.push({
                    originalName: file.name,
                    error: `Ø§Ù…ØªØ¯Ø§Ø¯ Ø§Ù„Ù…Ù„Ù ${fileExtension} Ù„Ø§ ÙŠØªØ·Ø§Ø¨Ù‚ Ù…Ø¹ Ù†ÙˆØ¹ Ø§Ù„ØµÙˆØ±Ø©`,
                    type: 'ERROR'
                });
                continue;
            }
            if (isVideo && !validVideoExts.includes(fileExtension)) {
                uploadedFiles.push({
                    originalName: file.name,
                    error: `Ø§Ù…ØªØ¯Ø§Ø¯ Ø§Ù„Ù…Ù„Ù ${fileExtension} Ù„Ø§ ÙŠØªØ·Ø§Ø¨Ù‚ Ù…Ø¹ Ù†ÙˆØ¹ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ`,
                    type: 'ERROR'
                });
                continue;
            }
            try {
                let uploadedFile;
                if (isCloudinaryAvailable) {
                    // Ø±ÙØ¹ Ø¥Ù„Ù‰ Cloudinary Ù…Ø¹ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ù…Ø­Ø³Ù†Ø©
                    console.log('â˜ï¸ Ø±ÙØ¹ Ø¥Ù„Ù‰ Cloudinary...');
                    // ØªØ­Ø³ÙŠÙ† Ø£Ø³Ù…Ø§Ø¡ Ø§Ù„Ù…Ù„ÙØ§Øª Ù„Ù€ SEO
                    const seoFriendlyName = generateSEOFriendlyName(file.name);
                    const cloudinaryOptions = {
                        folder: 'portfolio/projects',
                        resource_type: isVideo ? 'video' : 'image',
                        public_id: `${Date.now()}-${seoFriendlyName}`,
                        use_filename: false,
                        unique_filename: true,
                        overwrite: false,
                        // Ø¥Ø¶Ø§ÙØ© metadata Ù„Ù„SEO
                        context: {
                            alt: `Ù…Ø­ØªØ±ÙÙŠÙ† Ø§Ù„Ø¯ÙŠØ§Ø± Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠØ© - ${seoFriendlyName}`,
                            caption: `Ù…Ø´Ø±ÙˆØ¹ Ù…Ù† Ù…Ø­ØªØ±ÙÙŠÙ† Ø§Ù„Ø¯ÙŠØ§Ø± Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠØ© ÙÙŠ Ø¬Ø¯Ø©`,
                            title: seoFriendlyName
                        },
                        // ØªØ­Ø³ÙŠÙ† Ø®ØµØ§Ø¦Øµ Ø§Ù„Ù…Ù„ÙØ§Øª Ù„Ù„ÙˆÙŠØ¨
                        transformation: isVideo ? {
                            // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø£Ø³Ø§Ø³ÙŠØ© Ù„Ù„ÙÙŠØ¯ÙŠÙˆ ÙÙ‚Ø·
                            quality: 'auto',
                            width: 1280,
                            height: 720,
                            crop: 'limit'
                        } : {
                            // ØªØ­Ø³ÙŠÙ† Ù„Ù„ØµÙˆØ±
                            quality: 'auto',
                            format: 'webp',
                            width: 'auto',
                            crop: 'scale',
                            dpr: 'auto',
                            flags: 'progressive'
                        },
                        // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© Ù„Ù„Ø£Ù…Ø§Ù† ÙˆØ§Ù„Ø£Ø¯Ø§Ø¡
                        invalidate: true,
                        overwrite: true,
                        unique_filename: true,
                        use_filename: false
                    };
                    const result = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$src$2f$lib$2f$cloudinary$2e$ts__$5b$app$2d$route$5d$__$28$ecmascript$29$__["uploadToCloudinary"])(file, cloudinaryOptions);
                    console.log('âœ… ØªÙ… Ø±ÙØ¹ Ø§Ù„Ù…Ù„Ù Ø¥Ù„Ù‰ Cloudinary:', result.secure_url);
                    uploadedFile = {
                        originalName: file.name,
                        fileName: result.public_id,
                        src: result.secure_url,
                        url: result.secure_url,
                        type: file.type.startsWith('video/') ? 'VIDEO' : 'IMAGE',
                        size: result.bytes,
                        mimeType: file.type,
                        width: result.width || null,
                        height: result.height || null,
                        duration: result.duration || null,
                        cloudinary_public_id: result.public_id,
                        cloudinary_url: result.secure_url,
                        resource_type: result.resource_type,
                        storage_type: 'cloudinary'
                    };
                    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø§Ù„Ù†ØªÙŠØ¬Ø©
                    if (!uploadedFile.src) {
                        throw new Error('Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø±Ø§Ø¨Ø· ØµØ­ÙŠØ­ Ù…Ù† Cloudinary');
                    }
                } else {
                    // Ø±ÙØ¹ Ù…Ø­Ù„ÙŠ (fallback)
                    console.log('ğŸ’¾ Ø±ÙØ¹ Ù…Ø­Ù„ÙŠ (fallback mode)...');
                    const timestamp = Date.now();
                    const randomString = Math.random().toString(36).substring(2, 15);
                    const fileExtension = __TURBOPACK__imported__module__$5b$externals$5d2f$path__$5b$external$5d$__$28$path$2c$__cjs$29$__["default"].extname(file.name);
                    const fileName = `${timestamp}_${randomString}${fileExtension}`;
                    const filePath = __TURBOPACK__imported__module__$5b$externals$5d2f$path__$5b$external$5d$__$28$path$2c$__cjs$29$__["default"].join(uploadDir, fileName);
                    const bytes = await file.arrayBuffer();
                    const buffer = Buffer.from(bytes);
                    await (0, __TURBOPACK__imported__module__$5b$externals$5d2f$fs$2f$promises__$5b$external$5d$__$28$fs$2f$promises$2c$__cjs$29$__["writeFile"])(filePath, buffer);
                    console.log('âœ… ØªÙ… Ø­ÙØ¸ Ø§Ù„Ù…Ù„Ù Ù…Ø­Ù„ÙŠØ§Ù‹:', fileName);
                    uploadedFile = {
                        originalName: file.name,
                        fileName: fileName,
                        src: `/uploads/${fileName}`,
                        url: `/uploads/${fileName}`,
                        type: file.type.startsWith('video/') ? 'VIDEO' : 'IMAGE',
                        size: file.size,
                        mimeType: file.type,
                        storage_type: 'local'
                    };
                }
                uploadedFiles.push(uploadedFile);
            } catch (uploadError) {
                console.error('âŒ Ø®Ø·Ø£ ÙÙŠ Ø±ÙØ¹ Ø§Ù„Ù…Ù„Ù:', uploadError);
                uploadedFiles.push({
                    originalName: file.name,
                    error: `ÙØ´Ù„ ÙÙŠ Ø±ÙØ¹ ${file.name}: ${uploadError instanceof Error ? uploadError.message : 'Ø®Ø·Ø£ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ'}`,
                    type: 'ERROR'
                });
            }
        }
        if (uploadedFiles.length === 0) {
            return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
                error: 'Ù„Ù… ÙŠØªÙ… Ø±ÙØ¹ Ø£ÙŠ Ù…Ù„ÙØ§Øª Ø¨Ù†Ø¬Ø§Ø­'
            }, {
                status: 400
            });
        }
        // ÙØµÙ„ Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù†Ø§Ø¬Ø­Ø© Ø¹Ù† Ø§Ù„Ø®Ø§Ø·Ø¦Ø©
        const successfulFiles = uploadedFiles.filter((file)=>file.type !== 'ERROR');
        const failedFiles = uploadedFiles.filter((file)=>file.type === 'ERROR');
        console.log('ğŸ“Š Ù†ØªÙŠØ¬Ø© Ø§Ù„Ø±ÙØ¹:', {
            successful: successfulFiles.length,
            failed: failedFiles.length,
            total: uploadedFiles.length,
            storageType: isCloudinaryAvailable ? 'cloudinary' : 'local'
        });
        return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
            success: true,
            message: `ØªÙ… Ø±ÙØ¹ ${successfulFiles.length} Ù…Ù„Ù Ø¨Ù†Ø¬Ø§Ø­${failedFiles.length > 0 ? ` Ùˆ ÙØ´Ù„ ${failedFiles.length} Ù…Ù„Ù` : ''}`,
            files: successfulFiles,
            errors: failedFiles.length > 0 ? failedFiles : undefined,
            count: successfulFiles.length,
            storage_type: isCloudinaryAvailable ? 'cloudinary' : 'local'
        });
    } catch (error) {
        console.error('âŒ Ø®Ø·Ø£ Ø¹Ø§Ù… ÙÙŠ Ø±ÙØ¹ Ø§Ù„Ù…Ù„ÙØ§Øª:', error);
        return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f$next$2f$server$2e$js__$5b$app$2d$route$5d$__$28$ecmascript$29$__["NextResponse"].json({
            error: 'Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø±ÙØ¹ Ø§Ù„Ù…Ù„ÙØ§Øª',
            details: error instanceof Error ? error.message : 'Ø®Ø·Ø£ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ'
        }, {
            status: 500
        });
    }
}
}}),

};

//# sourceMappingURL=%5Broot-of-the-server%5D__9d8aa8ef._.js.map